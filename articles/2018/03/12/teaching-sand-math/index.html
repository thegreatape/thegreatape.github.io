<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>The Elements Of Computing Systems: Teaching First-Grade Math To Virtual Sand &#8211; Duct Tape and Turing Machines</title>
<meta name="description" content="">
<meta name="keywords" content="">
<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://thegreata.pe/images/birds.jpg">
<meta name="twitter:title" content="The Elements Of Computing Systems: Teaching First-Grade Math To Virtual Sand">
<meta name="twitter:description" content="Continuing my slow plod through TEoCS (also known as nand2tetris), I’ve now reached the part of building in building ...">
<meta name="twitter:creator" content="@thegreatape">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="The Elements Of Computing Systems: Teaching First-Grade Math To Virtual Sand">
<meta property="og:description" content="Duct Tape and Turing Machines">
<meta property="og:url" content="https://thegreata.pe/articles/2018/03/12/teaching-sand-math/">
<meta property="og:site_name" content="Duct Tape and Turing Machines">





<link rel="canonical" href="https://thegreata.pe/articles/2018/03/12/teaching-sand-math/">
<link href="https://thegreata.pe/feed.xml" type="application/atom+xml" rel="alternate" title="Duct Tape and Turing Machines Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="https://thegreata.pe/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="https://thegreata.pe/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="https://thegreata.pe/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://thegreata.pe/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://thegreata.pe/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://thegreata.pe/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://thegreata.pe/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://thegreata.pe/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://thegreata.pe/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->




<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
<div class="navigation-wrapper">
	<div class="site-name">
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="https://thegreata.pe/" >Home</a></li>
		        
				<li><a href="https://thegreata.pe/open-source" >Open Source</a></li>
		        
		        <li><i class="icon-feed"></i> <a href="https://thegreata.pe/feed.xml" title="Atom/RSS feed">Feed</a>
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->
  <div class="article-author-top">
    <img src="https://thegreata.pe/images/bio-photo.png" class="bio-photo" alt="Thomas Mayfield bio photo"></a>
<div class="bio-content">
  <h3>Thomas Mayfield</h3>
  <p>Polyglot programmer who loves the weird beautiful chaos of humans building software together. Fitness nerd. Southern kid living in Massachusetts.</p>
  <div class="social-icons">
    <a href="http://twitter.com/thegreatape" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
    
    
    
    
    <a href="http://github.com/thegreatape" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
    
    
  </div>
</div>

  </div>
  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      <h1 itemprop="name">The Elements Of Computing Systems: Teaching First-Grade Math To Virtual Sand</h1>
      <time datetime="2018-03-12T00:00:00-04:00" itemprop="datePublished">March 12, 2018</time>    
    </div><!--/ .headline-wrap -->
    <div class="article-wrap" itemprop="text">
      <p>Continuing my slow plod through TEoCS (also known as <a href="http://www.nand2tetris.org/">nand2tetris</a>), I’ve now reached the part of building in building a computer where I’ve built something that… computes.</p>

<p>The <em>Arithmetic Logic Unit</em> chip is the first thing I’ve made that felt like it deserved the label “chip” instead of the mechanical-sounding “gate”.  Just like everything else so far, at its heart it’s a bunch Nand gates with a lot of wires running between them… but it feels like we’ve crossed over from simple logic reified by wires into the real start of a more general purpose computing machine. The chip has a pair of 16-bit inputs, and 6 control bits, which you manipulate to do various combinations of arithmatic, from producing a constant value, addition, subtraction, bitwise boolean operations, negation upon those inputs. We’ll apparently be implementing multiplication and division at a higher level up the stack, but that’s a still a lot for some jumped-up simulated silicon.</p>

<p>It was, remarkably, only 14 lines of HDL code to implement, using all the gates I’d built so far.</p>

<p>It would have been pretty easy to rip through this chapter and build the ALU by just blindly implementing the logical operations indicated in the chip’s truth table and control bits, but I wanted to take a step back and work out with pen and paper <em>how</em> the chip actually accomplished a bunch of this math. It wasn’t obvious at all to me that, “ok, negate the y bus’s bits, then add them to x and then negate the result of that” comes out to <code class="highlighter-rouge">x-y</code>. But it does, and I’ve at least moved past taking it on faith after working out a few of these operations out with ink and dead trees. Pretty elegant design!</p>

<p>A few tidbits that were helpful for me as I worked through this chapter:</p>

<ul>
  <li>
    <p>You can use the literal values <code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code> if you want a wired to be always on or off.  This eluded me for a bit (heh heh heh).</p>
  </li>
  <li>
    <p>The tests will produce a (relatively) easy to read output file as they go. At least on OS X, it’s difficult to see the entirety of this output in the simulator’s UI, but it’s also available in a file in the current project directory with the <code class="highlighter-rouge">.out</code> extension. You can eyeball or diff each of its lines versus the test script’s <code class="highlighter-rouge">.cmp</code> file to start seeing where things have gone wrong.</p>
  </li>
  <li>
    <p>Examining the state of each internal pin of the chip in the hardware simulator is a great debugging technique. I found plenty of bugs by just running the test script, waiting for it to fail on a particular case, then stepping through what each internal pin/bus’s value should have been on paper.</p>
  </li>
</ul>

      <footer role="contentinfo">
        <div class="article-author-bottom">
          <img src="https://thegreata.pe/images/bio-photo.png" class="bio-photo" alt="Thomas Mayfield bio photo"></a>
<div class="bio-content">
  <h3>Thomas Mayfield</h3>
  <p>Polyglot programmer who loves the weird beautiful chaos of humans building software together. Fitness nerd. Southern kid living in Massachusetts.</p>
  <div class="social-icons">
    <a href="http://twitter.com/thegreatape" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
    
    
    
    
    <a href="http://github.com/thegreatape" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
    
    
  </div>
</div>

        </div>
      </footer>
    </div><!-- /.article-wrap -->
  </article>
  <div class="push"></div>
</div><!-- /#main -->

<div class="footer-wrap">
  <footer>
    <span>&copy; 2018 Thomas Mayfield. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://thegreata.pe/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://thegreata.pe/assets/js/scripts.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28952322-1', 'thegreata.pe');
  ga('send', 'pageview');

</script>
	        

</body>
</html>
