<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Logbook &#8211; Duct Tape and Turing Machines</title>
<meta name="description" content="">
<meta name="keywords" content="">
<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://thegreata.pe/images/birds.jpg">
<meta name="twitter:title" content="Logbook">
<meta name="twitter:description" content="">
<meta name="twitter:creator" content="@thegreatape">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Logbook">
<meta property="og:description" content="Duct Tape and Turing Machines">
<meta property="og:url" content="https://thegreata.pe/logbook/index.html">
<meta property="og:site_name" content="Duct Tape and Turing Machines">





<link rel="canonical" href="https://thegreata.pe/logbook/">
<link href="https://thegreata.pe/feed.xml" type="application/atom+xml" rel="alternate" title="Duct Tape and Turing Machines Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="https://thegreata.pe/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="https://thegreata.pe/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="https://thegreata.pe/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://thegreata.pe/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://thegreata.pe/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://thegreata.pe/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://thegreata.pe/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://thegreata.pe/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://thegreata.pe/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="articles" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="https://thegreata.pe/" >Articles</a></li>
		        
				<li><a href="https://thegreata.pe/logbook" >Logbook</a></li>
		        
				<li><a href="https://thegreata.pe/code" >Code</a></li>
		        
		        <li><i class="icon-feed"></i> <a href="https://thegreata.pe/feed.xml" title="Atom/RSS feed">Feed</a>
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div class="article-author-top">
  <img src="https://thegreata.pe/images/bio-photo.png" class="bio-photo" alt="Thomas Mayfield bio photo"></a>
<div class="bio-content">
  <h3>Thomas Mayfield</h3>
  <p>Polyglot programmer who loves the weird beautiful chaos of humans building software together. Fitness nerd. Southern kid living in Massachusetts.</p>
  <div class="social-icons">
    <a href="http://twitter.com/thegreatape" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
    
    
    
    
    <a href="http://github.com/thegreatape" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
    
    
  </div>
</div>

</div>

<div id="log-index" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <p class="tagline">
    The logbook is where I keep less structured, weekly-ish writing: stray thoughts and what I'm building or learning.
  </p>
  
    <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost" class="logbook">
      <h2 itemprop="headline">
        <a href="https://thegreata.pe/logbooks/2018-05-25-interlude-furball/" rel="bookmark" title="Interlude - Furball"> 
          <span class="post-date">May 25, 2018</span>
        </a>
      </h2>
      <div class="article-wrap" itemprop="text">
        <p>First, I’d like to introduce Ripley, one of the reasons my attention is a little scarce at the moment:</p>

<p><img src="/images/ripley.png" alt="Ripley" /></p>

<p>A nine-week old puppy is a joyous thing, and will happily hoover up every spare second you have.</p>

<p>Focused time for learning and study will resume probably around the time this little furball starts sleeping through the night without pee breaks. But even before we adopted her, it was pretty clear at this point that my goal of hitting a once-a-week writeup on things I’m learning isn’t going to happen. I do think striving for that cadence has still proven a push in the right direction. I’m going to continue tacking towards that goal even if the year-end average is probably going to come out lower than I hoped.</p>

<p>A few reflections from the last few weeks:</p>

<p>I’ve been leaning on <a href="https://habitica.com/">Habitica</a> as a way to help myself build daily habits and get through my todo list. It’s been working surprisingly—I’d even say embarrassingly—well. Progression systems and magic pixels, man. The part of me that fed a good chunk of my 20s into World of Warcraft is rolling its eyes in not-surprise.</p>

<p>Prior to doggo adoption, I’d gotten a pretty good streak of spending 20 minutes a day working on whatever my current project is… but found myself having a hard of time actually sitting down and writing about it. I think part of the friction here is how this blog is structured. Aside from a couple about-me pages, it’s a collection of articles. Trying to push my intended log-of-learning writing into this format has wound up making me feel like each entry needs to have a focused point and something to teach others. What I want out of this writing, instead, is just a nudge towards spending time deliberately learning and a bit of the clarity that comes from having to structure my thoughts to write them down. So, I’m going to try splitting this blog into two sections: a collection of articles/essays (which is most of the existing stuff) and a looser stream of thoughts and updates. Should be an interesting experiment to see if it helps shake loose writing more frequently.</p>


      </div>
    </article>
  
    <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost" class="logbook">
      <h2 itemprop="headline">
        <a href="https://thegreata.pe/logbooks/2018-04-19-resisting-an-avengers-joke/" rel="bookmark" title="The Elements Of Computing Systems: Resisting An Avengers Joke"> 
          <span class="post-date">Apr 19, 2018</span>
        </a>
      </h2>
      <div class="article-wrap" itemprop="text">
        <p>Out of the wiring swamp, on to the <a href="https://plus.google.com/+JeanBaptisteQueru/posts/dfydM2Cnepe">dizzying but invisible depths</a> of software abstraction.</p>

<p>I was actually a little surprised that there was a full chapter devoted to writing an assembler—it’s just mechanically translating assembly code to machine code, word for word, right? As it turns out, while command translation itself is super straightforward, location labels for branching and variable declaration added a little fun. We wound up with a two pass design: a first pas to allow for memory address allocation for each variable and label, then a second pass to generate the machine code itself.</p>

<p>The system isn’t self hosting—that is, we now don’t use the tools we’re writing to directly build the next level of software (which would laborious, since we haven’t built an operating system yet, much less a text editor!). This means we get to use whatever outside-of-Hack language we want to build the assembler. So now instead of fighting with HDL, I’m writing Ruby! I write Ruby most of the day for work and have for the last seven years or so.  It’s DARN NICE for text chomping.</p>

<p>Onwards!</p>

      </div>
    </article>
  
    <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost" class="logbook">
      <h2 itemprop="headline">
        <a href="https://thegreata.pe/logbooks/2018-04-09-hardware-complete/" rel="bookmark" title="The Elements of Computing Systems: Hardware, Complete"> 
          <span class="post-date">Apr 09, 2018</span>
        </a>
      </h2>
      <div class="article-wrap" itemprop="text">
        <p>Holy crap, we’re done with the hardware part. I built a computer!</p>

<h2 id="chapter-4">Chapter 4</h2>
<p>A cool aspect of each chapter’s material being a self-contained abstraction is that the book can skip between levels for pedagogical reasons. So we wound up learning to write some programs in the machine language for our fully-built computer, before the final phase of actually wiring up the complete computer.</p>

<p><a href="/images/assembly.png"><img src="/images/assembly.png" alt="hack assembly language" /></a></p>

<p>It’s… definitely for machines. Messing around with the assembly language was pretty important for the next chapter. Without that experience, I don’t think I’d have understood enough of the intent behind how things are accomplished using its limited idioms. Debugging when my CPU wasn’t wired up correctly might have cost me a fair bit more hair!</p>

<p>Two side notes from spelunking with Hack assembly:</p>

<ul>
  <li><a href="http://www.marksmath.com/tecs/hack-asm/hack-asm.html">This page</a> was a super useful companion for dealing with some very picky language stuff.</li>
  <li>There’s a part where you need to load a 16-bit word that’s all <code class="highlighter-rouge">1</code>s into memory to turn a part of the screen dark. You can actually only load 15-bit words in A-instructions, but the assembler will silently accept constants that are over the size you can express in 15 bits, leading to some serious headscratching.</li>
</ul>

<h2 id="chapter-5">Chapter 5</h2>
<p>Building the CPU and Memory units were the most challenging bits of HDL wiring so far. Breaking everything that needed to happen down into discrete tasks (and being well rested) was key here. Definitely went back to pen &amp; paper here to make this work.</p>

<p><a href="/images/cpu.jpg"><img src="/images/cpu.jpg" alt="wiring the CPU on paper" /></a></p>

<p>All that wiring gore boiled down to only 18 lines of HDL to make a simple CPU, using all of the previously built components. Wow.</p>

<p>I did lots of breaking inputs down into binary to make sense of how to connect logical wires. Plotting numbers out as monospaced binary is another useful form of sketching:</p>

<p><a href="/images/ram-binary.png"><img src="/images/ram-binary.png" alt="writing out RAM addresses in binary" /></a></p>

<p>An added level of difficult: bus indexing works backwards from how my brain thinks, as traditional array indexes go left to right. Bus indexing, on the other hand, goes from the least significant bit to the most signicant bit… which is right to left when binary is written out. This must have accounted for at least half the bugs I created.</p>

<h2 id="meta">Meta</h2>
<p>It’s been three weeks since the entry before this; not exactly the pace I set out for myself at the beginning of the year. I was getting a little bored with writing a single entry for each chapter, but trying to get two chapters worth of work done in a single week <em>and</em> a write up wound up taking much longer.</p>

<p>I’ve also been having a hard time finding the focus to do this particular project after work, so only the real progress happens on weekends. I figured that going back to the blinking lights part of programming would stretch different brain muscles from what I’m using at work, but I think that’s demonstrably false. I’m still having fun, but probably need to either moderate my expectations of what I can do during the week, and/or get more ok with these writeups being progress updates rather than proof of commpleting milestones.</p>

      </div>
    </article>
  
    <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost" class="logbook">
      <h2 itemprop="headline">
        <a href="https://thegreata.pe/logbooks/2018-03-18-time-state-and-memory/" rel="bookmark" title="The Elements Of Computing Systems: Time, State & Memory"> 
          <span class="post-date">Mar 18, 2018</span>
        </a>
      </h2>
      <div class="article-wrap" itemprop="text">
        <p>Oh boy, a clock! In this chapter of <a href="http://www.nand2tetris.org/">nand2tetris</a>, we started teaching our logic circuits about time and consequently, memory. We’re introduced to a single new primitive, a data flipflop: all it does is output the value of its input one clock tick ago. With that and the array of combinatorial logic gates from previous chapters, we build all the way up to 16 kilobye RAM chips!</p>

<p>It was a bit disappointing that DFFs are given as primitives here. Though the book says they can be composed from Nand gates just like the rest of the chips we’ve built so far, it would have been neat to see the gory details of how one goes from combinatorial, stateless logic to sequential, time-based logic. Apparently the construction of DFFs is “intricate”, so I get pedagogically why we aren’t asked to implement them. Still, nandandflipflop2tetris just doesn’t have the same ring…</p>

<p>That aside, building memory chips felt like like bit twiddling and more like combining of logical components. These chips were easier to get right on the first-ish try without pen and paper; the composing of larger and larger RAM chips felt particularly simple and elegant. It did, however, take a bit for me to shift my thinking abouts values throughout a system being phased time-wise: e.g. you set inputs up, then <em>on the next clock tick</em> the outputs react.</p>

<p>Aside: an HDL syntax thing that I didn’t know is that you can declare pin connection twice on the gate. Like, if I wanted to hook up a DFF’s output pin to both the chip’s out pin and something else internally, you can do  <code class="highlighter-rouge">DFF(in=something, out=outb, out=out)</code> . The simulator won’t let you connect pins that touch the outside world to internal pins, so you can’t just use <code class="highlighter-rouge">out</code>. Go figure.</p>

      </div>
    </article>
  
    <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost" class="logbook">
      <h2 itemprop="headline">
        <a href="https://thegreata.pe/logbooks/2018-03-12-teaching-sand-math/" rel="bookmark" title="The Elements Of Computing Systems: Teaching First-Grade Math To Virtual Sand"> 
          <span class="post-date">Mar 12, 2018</span>
        </a>
      </h2>
      <div class="article-wrap" itemprop="text">
        <p>Continuing my slow plod through TEoCS (also known as <a href="http://www.nand2tetris.org/">nand2tetris</a>), I’ve now reached the part of building in building a computer where I’ve built something that… computes.</p>

<p>The <em>Arithmetic Logic Unit</em> chip is the first thing I’ve made that felt like it deserved the label “chip” instead of the mechanical-sounding “gate”.  Just like everything else so far, at its heart it’s a bunch Nand gates with a lot of wires running between them… but it feels like we’ve crossed over from simple logic reified by wires into the real start of a more general purpose computing machine. The chip has a pair of 16-bit inputs, and 6 control bits, which you manipulate to do various combinations of arithmatic, from producing a constant value, addition, subtraction, bitwise boolean operations, negation upon those inputs. We’ll apparently be implementing multiplication and division at a higher level up the stack, but that’s a still a lot for some jumped-up simulated silicon.</p>

<p>It was, remarkably, only 14 lines of HDL code to implement, using all the gates I’d built so far.</p>

<p>It would have been pretty easy to rip through this chapter and build the ALU by just blindly implementing the logical operations indicated in the chip’s truth table and control bits, but I wanted to take a step back and work out with pen and paper <em>how</em> the chip actually accomplished a bunch of this math. It wasn’t obvious at all to me that, “ok, negate the y bus’s bits, then add them to x and then negate the result of that” comes out to <code class="highlighter-rouge">x-y</code>. But it does, and I’ve at least moved past taking it on faith after working out a few of these operations out with ink and dead trees. Pretty elegant design!</p>

<p>A few tidbits that were helpful for me as I worked through this chapter:</p>

<ul>
  <li>
    <p>You can use the literal values <code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code> if you want a wired to be always on or off.  This eluded me for a bit (heh heh heh).</p>
  </li>
  <li>
    <p>The tests will produce a (relatively) easy to read output file as they go. At least on OS X, it’s difficult to see the entirety of this output in the simulator’s UI, but it’s also available in a file in the current project directory with the <code class="highlighter-rouge">.out</code> extension. You can eyeball or diff each of its lines versus the test script’s <code class="highlighter-rouge">.cmp</code> file to start seeing where things have gone wrong.</p>
  </li>
  <li>
    <p>Examining the state of each internal pin of the chip in the hardware simulator is a great debugging technique. I found plenty of bugs by just running the test script, waiting for it to fail on a particular case, then stepping through what each internal pin/bus’s value should have been on paper.</p>
  </li>
</ul>

      </div>
    </article>
  

<style>
</style>

  
  <ul class="pager">
      

      
      <li class="next">
          <a href="/logbook/2/">Older Posts &rarr;</a>
      </li>
      

  </ul>
  
</div><!-- /#index -->

<div class="footer-wrap">
  <footer>
    <span>&copy; 2018 Thomas Mayfield. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://thegreata.pe/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://thegreata.pe/assets/js/scripts.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28952322-1', 'thegreata.pe');
  ga('send', 'pageview');

</script>


</body>
</html>
